<br>

<fieldset>
  <%= nested_form_for([@class_gym], :html => { :class => :form }) do |f| -%>
    
    <%= f.label 'Modalidade', :class => "control-label" %>
    <%= select("class_gym", "modality_id", Modality.all.collect {|p| [ p.name, p.id ] }, {include_blank: '-- Selecione a modalidade --'}) %>
    
    <br>
    <%= f.label 'Data de Início', :class => 'control-label' %>
    <%= f.text_field :start_date, :class => 'text_field', :onkeyup => "maskIt(this,event,'##/##/####')", :value => l(Date.today, :format => :date), :maxlength => "10" %>
    
    <br />
    <% week_array = [] 
    Date::DAYNAMES.each_with_index { |day, i| week_array << [day, i] } %>
    <%= f.fields_for :schedules do |fs| %>
      <%= fs.select(:week_day, week_array, {include_blank: '---'})%>
      <%= fs.label "De:" %>
      <%= fs.time_field :start_time%>
      <%= fs.label "Até:" %>
      <%= fs.time_field :end_time%>
      <%= fs.link_to_remove "Remover esse dia" %>
    <% end %>
    <p><%= f.link_to_add "Adicionar um dia", :schedules %></p>
    <%= f.label "Todos os dias:"%> 
    <%= label_tag "De:" %>
    <%= time_field_tag :start_time%>
    <%= label_tag "Até:" %>
    <%= time_field_tag :end_time%>
    
   
    <br>
    <%= f.label 'Capacidade', :class => "control-label" %>
    <%= f.text_field :capacity, :class => "input-xlarge", :onkeyup => "toUppercase(this);", :maxlength => "6" %>
    
    <br>
    <%= f.label 'Professor', :class => "control-label" %>
    <%= select("class_gym", "instructor_id", Instructor.all.collect {|p| [ p.name, p.id ] }, {include_blank: '-- Selecione o professor --'}, {class: "span4", onchange: "atualizaForm()", id:"idInstructor"}) %>
    
    <br />
    
    <% if !@class_gym.id.nil? %>
      <h3>Alunos matriculados</h3>
    <% end %>
    
    <br>
    <br>
    <div>
      <% if @class_gym.id.nil? %>
      <button class="btn btn-primary" type="submit">Cadastrar</button>
      <% else %>
      <button class="btn btn-info" type="submit">Alterar</button>
      <% end %>
      <%= link_to "Cancelar", class_gyms_path, data: {confirm: "Deseja cancelar a operação? Todos os dados serão perdidos.", class: 'btn btn-default'} %>
    </div>
    
  <% end %>
</fieldset>
